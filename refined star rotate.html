<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Angular Grid Animation</title>
  <style>
    body {
      margin: 0;
      overflow: hidden;
      background-color: black;
    }
    canvas {
      display: block;
    }
  </style>
</head>
<body>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.6.0/p5.min.js"></script>

  <script>
    let gridSize = 60;
    let cols, rows;
    let lineLength = 37.5;
    let angles = [];
    let angularVels = [];

    let asteriskX;
    let asteriskY;

    let hoverScale = 1;
    let targetScale = 1;
    let scaleVel = 0;

    function setup() {
      createCanvas(windowWidth, windowHeight);
      angleMode(RADIANS);
      noFill();
      strokeWeight(4.5);
      noCursor();
      initGrid();
    }

    function draw() {
      background(0);

      cols = floor(width / gridSize);
      rows = floor(height / gridSize);

      asteriskY = floor(rows / 2);
      asteriskX = floor(cols / 3);

      let centerX = asteriskX * gridSize + gridSize / 2;
      let centerY = asteriskY * gridSize + gridSize / 2;

      let d = dist(mouseX, mouseY, centerX, centerY);
      targetScale = (d < gridSize / 2) ? 1.8 : 1;

      let spring = 0.1;
      let damping = 0.6;
      let force = (targetScale - hoverScale) * spring;
      scaleVel += force;
      scaleVel *= damping;
      hoverScale += scaleVel;

      for (let y = 0; y < rows; y++) {
        for (let x = 0; x < cols; x++) {
          let index = x + y * cols;
          let px = x * gridSize + gridSize / 2;
          let py = y * gridSize + gridSize / 2;

          if (angles.length !== cols * rows) {
            angles = new Array(cols * rows).fill(0);
            angularVels = new Array(cols * rows).fill(0);
          }

          let targetAngle = atan2(mouseY - py, mouseX - px);
          let diff = targetAngle - angles[index];
          diff = (diff + PI) % (2 * PI) - PI;

          let angularAccel = diff * 0.1;
          angularVels[index] += angularAccel;
          angularVels[index] *= 0.8;
          angles[index] += angularVels[index];

          push();
          translate(px, py);
          rotate(angles[index]);

          if (x === asteriskX && y === asteriskY) {
            stroke(0, 165, 155);
            scale(hoverScale);
            for (let i = 0; i < 6; i++) {
              let angle = TWO_PI / 6 * i;
              let x1 = cos(angle) * lineLength / 2;
              let y1 = sin(angle) * lineLength / 2;
              let x2 = -x1;
              let y2 = -y1;
              line(x1, y1, x2, y2);
            }
          } else {
            stroke(30);
            line(-lineLength / 2, 0, lineLength / 2, 0);
          }

          pop();
        }
      }
    }

    function mousePressed() {
      let px = asteriskX * gridSize + gridSize / 2;
      let py = asteriskY * gridSize + gridSize / 2;
      let d = dist(mouseX, mouseY, px, py);
      if (d < gridSize / 2) {
        window.open("https://www.behance.net/libnypatrick", "_blank"); // <- your link here
      }
    }

    function windowResized() {
      resizeCanvas(windowWidth, windowHeight);
      initGrid();
    }

    function initGrid() {
      cols = floor(width / gridSize);
      rows = floor(height / gridSize);
      angles = new Array(cols * rows).fill(0);
      angularVels = new Array(cols * rows).fill(0);
    }
  </script>
</body>
</html>
